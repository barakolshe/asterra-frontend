(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[316],{5405:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/add-hobbies",function(){return r(1880)}])},8919:function(e,t,r){"use strict";var i=r(5893),s=r(3156),a=r(629);r(7294),t.Z=e=>{let{children:t,info:r}=e;return(0,i.jsxs)(s.Z,{component:"main",maxWidth:"sm",sx:{mb:4},children:[(0,i.jsx)(a.Z,{variant:"outlined",sx:{my:{xs:3,md:6},p:{xs:2,md:3}},children:t}),r]})}},4733:function(e,t,r){"use strict";r.d(t,{J:function(){return i}});let i="http://localhost:8000"},1880:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return Q}});var i=r(5893),s=r(7294),a=r(2734),n=r(5861),o=r(6886),l=r(4054),d=r(3841),c=r(138),u=r(3366),p=r(7462),m=r(6010),b=r(4780),h=r(1796),v=r(948),g=r(1657),f=r(9773),x=r(7739),y=r(8974),Z=r(1705),j=r(5097),_=r(4592),C=r(6336),$=r(1588),O=r(4867);function w(e){return(0,O.Z)("MuiMenuItem",e)}let F=(0,$.Z)("MuiMenuItem",["root","focusVisible","dense","disabled","divider","gutters","selected"]),k=["autoFocus","component","dense","divider","disableGutters","focusVisibleClassName","role","tabIndex","className"],S=e=>{let{disabled:t,dense:r,divider:i,disableGutters:s,selected:a,classes:n}=e,o=(0,b.Z)({root:["root",r&&"dense",t&&"disabled",!s&&"gutters",i&&"divider",a&&"selected"]},w,n);return(0,p.Z)({},n,o)},q=(0,v.ZP)(x.Z,{shouldForwardProp:e=>(0,v.FO)(e)||"classes"===e,name:"MuiMenuItem",slot:"Root",overridesResolver:(e,t)=>{let{ownerState:r}=e;return[t.root,r.dense&&t.dense,r.divider&&t.divider,!r.disableGutters&&t.gutters]}})(({theme:e,ownerState:t})=>(0,p.Z)({},e.typography.body1,{display:"flex",justifyContent:"flex-start",alignItems:"center",position:"relative",textDecoration:"none",minHeight:48,paddingTop:6,paddingBottom:6,boxSizing:"border-box",whiteSpace:"nowrap"},!t.disableGutters&&{paddingLeft:16,paddingRight:16},t.divider&&{borderBottom:`1px solid ${(e.vars||e).palette.divider}`,backgroundClip:"padding-box"},{"&:hover":{textDecoration:"none",backgroundColor:(e.vars||e).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${F.selected}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / ${e.vars.palette.action.selectedOpacity})`:(0,h.Fq)(e.palette.primary.main,e.palette.action.selectedOpacity),[`&.${F.focusVisible}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.focusOpacity}))`:(0,h.Fq)(e.palette.primary.main,e.palette.action.selectedOpacity+e.palette.action.focusOpacity)}},[`&.${F.selected}:hover`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.hoverOpacity}))`:(0,h.Fq)(e.palette.primary.main,e.palette.action.selectedOpacity+e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / ${e.vars.palette.action.selectedOpacity})`:(0,h.Fq)(e.palette.primary.main,e.palette.action.selectedOpacity)}},[`&.${F.focusVisible}`]:{backgroundColor:(e.vars||e).palette.action.focus},[`&.${F.disabled}`]:{opacity:(e.vars||e).palette.action.disabledOpacity},[`& + .${j.Z.root}`]:{marginTop:e.spacing(1),marginBottom:e.spacing(1)},[`& + .${j.Z.inset}`]:{marginLeft:52},[`& .${C.Z.root}`]:{marginTop:0,marginBottom:0},[`& .${C.Z.inset}`]:{paddingLeft:36},[`& .${_.Z.root}`]:{minWidth:36}},!t.dense&&{[e.breakpoints.up("sm")]:{minHeight:"auto"}},t.dense&&(0,p.Z)({minHeight:32,paddingTop:4,paddingBottom:4},e.typography.body2,{[`& .${_.Z.root} svg`]:{fontSize:"1.25rem"}}))),B=s.forwardRef(function(e,t){let r;let a=(0,g.Z)({props:e,name:"MuiMenuItem"}),{autoFocus:n=!1,component:o="li",dense:l=!1,divider:d=!1,disableGutters:c=!1,focusVisibleClassName:b,role:h="menuitem",tabIndex:v,className:x}=a,j=(0,u.Z)(a,k),_=s.useContext(f.Z),C=s.useMemo(()=>({dense:l||_.dense||!1,disableGutters:c}),[_.dense,l,c]),$=s.useRef(null);(0,y.Z)(()=>{n&&$.current&&$.current.focus()},[n]);let O=(0,p.Z)({},a,{dense:C.dense,divider:d,disableGutters:c}),w=S(a),F=(0,Z.Z)($,t);return a.disabled||(r=void 0!==v?v:-1),(0,i.jsx)(f.Z.Provider,{value:C,children:(0,i.jsx)(q,(0,p.Z)({ref:F,role:h,tabIndex:r,component:o,focusVisibleClassName:(0,m.Z)(w.focusVisible,b),className:(0,m.Z)(w.root,x)},j,{ownerState:O,classes:w}))})});var I=r(6815),N=r(135),V=r(7357),M=r(3321),T=r(8919),H=()=>(0,i.jsx)(V.Z,{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"100%",children:(0,i.jsx)(n.Z,{variant:"h2",color:"error",fontWeight:"bold",children:"Error"})}),P=r(8456),E=()=>(0,i.jsx)(V.Z,{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"100%",children:(0,i.jsx)(P.Z,{})}),R=r(2175),W=r(6310),J=r(6154),L=r(7837),A=r(5945),D=r(4733);let G=W.Ry({hobbies:W.Z_().required("required"),user_id:W.Rx().required("required")}),z={hobbies:"",user_id:""},X=e=>e.data.map(e=>({user_id:e.id,name:"".concat(e.first_name," ").concat(e.last_name),hobbies:e.hobbies}));var K=()=>{let{isLoading:e,data:t,isError:r,error:i}=(0,L.a)({queryKey:["get-users"],queryFn:()=>J.Z.get("".concat(D.J,"/user/users-hobbies")),select:X}),a=(0,A.NL)(),[n,o]=s.useState({type:"success",message:""});s.useEffect(()=>{"success"===n.type&&""!==n.message&&setTimeout(()=>o({type:"success",message:""}),2e3)},[n,o]);let l=(0,R.TA)({initialValues:z,validationSchema:G,onSubmit:(e,r)=>{var i;let s=(null==t?void 0:null===(i=t.find(t=>t.user_id===e.user_id))||void 0===i?void 0:i.hobbies)===null?J.Z.post("".concat(D.J,"/hobbies"),e):J.Z.put("".concat(D.J,"/hobbies/").concat(e.user_id),e);s.then(()=>{a.invalidateQueries(["get-users"]),o({type:"success",message:"Hobbies were created"}),r.resetForm(z)}).catch(e=>{o({type:"error",message:"Failed to create hobbies"})})}});return{formik:l,handlers:{userSelectedHandler:e=>{if(""===e)l.setFieldValue("user_id",e),l.setFieldValue("hobbies","");else{var r;let i=null==t?void 0:null===(r=t.find(t=>t.user_id===e))||void 0===r?void 0:r.hobbies;l.setFieldValue("user_id",e),l.setFieldValue("hobbies",null!==i?i:"")}}},queries:{users:{data:t,isLoading:e,isError:r,error:i}},message:n,setMessage:o}},Q=()=>{let{formik:e,handlers:{userSelectedHandler:t},queries:{users:{data:r,isError:s,isLoading:u,error:p}},message:m}=K(),b=(0,a.Z)();if(s)return console.error(p),(0,i.jsx)(H,{});if(u)return(0,i.jsx)(E,{});let h=(0,i.jsx)(n.Z,{variant:"h5",align:"center",gutterBottom:!0,color:"error"===m.type?b.palette.error.main:b.palette.success.main,children:m.message});return(0,i.jsx)(T.Z,{info:h,children:(0,i.jsxs)("form",{onSubmit:e.handleSubmit,children:[(0,i.jsx)(n.Z,{variant:"h4",align:"center",gutterBottom:!0,children:"Add hobbies"}),(0,i.jsxs)(o.ZP,{container:!0,spacing:4,children:[(0,i.jsx)(o.ZP,{item:!0,xs:12,sm:4,children:(0,i.jsxs)(l.Z,{fullWidth:!0,error:e.touched.user_id&&!!e.errors.user_id,children:[(0,i.jsx)(d.Z,{id:"demo-simple-select-label",children:"User"}),(0,i.jsxs)(c.Z,{labelId:"demo-simple-select-label",id:"demo-simple-select",label:"Age",value:e.values.user_id,onChange:e=>t(e.target.value),onBlur:e.handleBlur,children:[(0,i.jsx)(B,{value:"",children:(0,i.jsx)("em",{children:"None"})},"none"),r.map(e=>{let{name:t,user_id:r}=e;return(0,i.jsx)(B,{value:r,children:t},r)})]}),(0,i.jsx)(I.Z,{children:e.touched.user_id&&void 0!==e.errors.user_id?e.errors.user_id.toString():""})]})}),(0,i.jsx)(o.ZP,{item:!0,xs:8,children:(0,i.jsx)(N.Z,{fullWidth:!0,id:"hobbies",name:"hobbies",label:"Hobbies",multiline:!0,rows:4,value:e.values.hobbies,onChange:e.handleChange,onBlur:e.handleBlur,error:e.touched.hobbies&&!!e.errors.hobbies,helperText:e.touched.hobbies&&void 0!==e.errors.hobbies?e.errors.hobbies.toString():""})}),(0,i.jsx)(V.Z,{sx:{display:"flex",flexDirection:"row",justifyContent:"center",width:"100%"},children:(0,i.jsx)(M.Z,{color:"primary",variant:"contained",type:"submit",sx:{mt:3},children:"Submit"})})]})]})})}}},function(e){e.O(0,[154,61,400,774,888,179],function(){return e(e.s=5405)}),_N_E=e.O()}]);